:xrefstyle: short

=== Virtual deployment

When you deploy this Quick Start in virtual mode, you build the following {partner-product-name} environment in the AWS Cloud. Elements of the Quick Start are outlined in the dotted orange box.

[#architecture-virtual]
.Architecture of the {partner-product-short-name} Quick Start—virtual deployment
image::../images/IMCQuickStartArchitecture-Virtual.png[Virtual architecture]

As shown in <<architecture-virtual>>, the virtual deployment of the {partner-product-short-name} Quick Start sets up the following:

* **A virtual private cloud (VPC).** The VPC is configured with a public subnet within a single Availability Zone. The {partner-product-short-name} Quick Start can be launched in the default VPC of your existing AWS infrastructure, or it can generate a new VPC.*
* In the subnet:
** **EC2 instance 1.** This instance is for the partner edge application.
** **EC2 instance 2.** This instance is for the AWS IoT Greengrass core.* It simulates the edge-gateway device (industrial PC) that would run on the customer’s premises. When you launch the Quick Start, you configure this Greengrass group for the dataflow option that suits your use case. Dataflow options are the data-ingestion paths available with this architecture. These are the three dataflow options: 
*** **Dataflow option 1.** This path sends data from the partner edge application's OPC UA server to AWS IoT SiteWise. Data flows through the AWS IoT SiteWise connector running in an AWS IoT Greengrass core. 
*** **Dataflow option 2a.** This path sends data from the partner edge application—for example, Ignition with the Cirrus Link MQTT transmission module—directly to AWS IoT Core.
*** **Dataflow option 2b.** This path sends data from the partner edge application to the AWS IoT Greengrass core. There, customer-defined AWS Lambda functions can process or filter the data as well as use it for local machine learning (ML) model inference: Greengrass integration with Amazon SageMaker. (While you can use Amazon Athena to create datasets, Athena resources are not created automatically; you would provision them after launching the Quick Start.) Alternatively, the data may be consumed by a containerized Docker application (not shown). Raw and processed data can then be transmitted to the AWS Cloud through a number of paths, including AWS IoT Core, Amazon Kinesis Data Streams, or AWS IoT Analytics. These edge-processing capabilities are not part of the IMC Quick Start, so they aren't shown in the dotted orange box. You can extend the IMC architecture and add whichever components apply for your use case. 
* **Asset Model Converter.** The AMC is a serverless, module-based framework that uses Amazon S3, Amazon DynamoDB, and Lambda to map the partner edge application's asset-modeling conventions onto AWS IoT SiteWise. When you launch the Quick Start, the AMC automatically converts data from the partner edge application's asset-hierarchy definition object (a JSON file with definitions for factory, lines, machines, and tags) into AWS IoT SiteWise models and assets. For details, see <<amc-architecture>>. 
* **AWS IoT SiteWise.** With this managed service, you can collect, model, analyze, and visualize data from industrial equipment at scale. The service, which maintains the asset hierarchy's metadata, contains a managed database for all the time-series data generated by the customer assets. It includes a SaaS dashboard-building feature called AWS IoT SiteWise Monitor. You use SiteWise Monitor to build custom dashboards, or portals, to view and share near-real-time data from your connected devices and equipment.
* **AWS IoT Core.** This service receives and routes MQTT messages either directly from the partner edge application or from the AWS IoT Greengrass core.
* **Amazon Kinesis Data Firehose.** This service routes data messages from AWS IoT Core to an Amazon S3 bucket.
* **Amazon S3.** The S3 bucket can serve as a cold-storage tier for data.
* **Amazon QuickSight.** You use this service to build custom business-intelligence dashboards and visualizations for data stored in the S3 bucket. 

[.small]#* The template that deploys the Quick Start into an existing VPC skips the components marked by asterisks and prompts you for your existing VPC configuration.#

=== Physical deployment

When you deploy this Quick Start in physical mode (on the customer's premises, such as in a factory), you build an environment like the one shown in <<architecture-physical>>. Elements of the Quick Start are outlined in the dotted orange box.

[#architecture-physical]
.Architecture of the {partner-product-short-name} Quick Start—physical deployment
image::../images/IMCQuickStartArchitecture-Physical.png[Physical architecture]

Unlike the virtual deployment (<<architecture-virtual>>), the physical deployment (<<architecture-physical>>) has the AWS IoT Greengrass core running on an industrial PC on the customer's premises. The physical deployment uses the same resources as the virtual deployment with the following differences:

* In physical deployments, no EC2 instances are launched in a VPC. Instead, AWS IoT Greengrass core runs directly onto an industrial PC. IoT Greengrass core is installed by a bootstrap installation script that is created during the {partner-product-short-name} Quick Start's CloudFormation stack launch.
* In physical deployments, the partner edge application communicates with customer assets—PLCs, equipment, data stores, and other IoT devices—running in the factory.  

=== The Asset Model Converter

For both virtual and physical architectures, at the heart of the {partner-product-short-name} Quick Start is the Asset Model Converter (AMC), detailed in <<amc-architecture>>. The AMC is a serverless, module-based framework. It automatically converts definitions of a customer's asset hierarchy (factory, lines, machines, and tags) from the partner edge application to equivalent definitions in AWS IoT SiteWise models and assets. 

[#amc-architecture]
[link=images/AMCArchitecture.png]
.AMC architecture diagram
image::../images/AMCArchitecture.png[AMC architecture]

The AMC architecture, shown in <<amc-architecture>>, has a serverless sequence flow. The AMC ingests asset-hierarchy-definition files or messages generated by the partner edge application and converts them into a schema compatible with AWS IoT SiteWise. It then automatically provisions a matching asset hierarchy (factory, lines, machines, and tags) in AWS IoT SiteWise. With this automatic mapping, application builders have immediate access to the customer's asset hierarchy within a managed service (AWS IoT SiteWise) in the AWS Cloud. These application builders may be the customer's own developers, regional or global systems integrators, or an AWS ProServe team. 

